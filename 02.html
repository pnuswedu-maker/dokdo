<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„: ì—­ì‚¬ì˜ ê¸°ë¡, ì§„ì‹¤ì˜ ì—°ëŒ€ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #fafaf9; color: #1c1917; }
        .timeline-line { position: absolute; left: 50%; transform: translateX(-50%); width: 2px; height: 100%; background-color: #e7e5e4; z-index: 0; }
        .timeline-dot { z-index: 10; transition: all 0.3s ease; }
        .timeline-card { transition: all 0.3s ease; }
        .timeline-card:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .filter-btn.active { background-color: #0c4a6e; color: white; border-color: #0c4a6e; }
        /* Chart container override */
        .chart-wrapper {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
            height: 350px;
        }
        @media (max-width: 640px) {
            .timeline-line { left: 20px; transform: none; }
            .chart-wrapper { height: 300px; }
        }
        .highlight-text { background: linear-gradient(120deg, #e0f2fe 0%, #e0f2fe 100%); background-repeat: no-repeat; background-size: 100% 40%; background-position: 0 88%; }
    </style>
    <!-- Chosen Palette: Warm Neutrals & Deep Sea Blue (Stone for bg, Sky/Blue for accents) -->
    <!-- Application Structure Plan:
        1. Hero Section: Emotional connection, title, and total years covered.
        2. Analytics Dashboard: "History at a Glance" using Chart.js to show event frequency by century, proving the long-standing history vs modern conflict.
        3. Interactive Timeline: The core experience. Vertical layout (responsive) with filtering capabilities (Records vs. Conflict vs. International).
        4. Detail View: Cards expand or highlight to show "Content & Meaning" clearly.
        5. Engagement: A simple fact check/quiz module at the bottom.
        Rationale: Grouping by 'Era' or 'Type' helps users understand that Dokdo is not just a modern issue but has deep historical roots.
    -->
    <!-- Visualization & Content Choices:
        1. Event Frequency Chart (Bar): Shows density of records over centuries. Goal: Inform/Analyze. 
        2. Filterable Timeline: HTML/JS. Goal: Explore/Organize.
        3. Category Badges: Visual coding for 'Korea Record', 'Japan Acknowledgement', 'Conflict'. Goal: Classify.
        4. Interaction: Click to filter, Hover for emphasis.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header / Hero -->
    <header class="bg-stone-900 text-stone-100 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden">
        <!-- Home Button Added Here -->
        <div class="absolute top-4 left-4 z-20">
            <a href="index.html" class="flex items-center gap-2 bg-white/10 hover:bg-white/20 backdrop-blur-md text-white px-4 py-2 rounded-full border border-white/20 transition-all text-sm font-medium">
                <span>ğŸ </span>
                <span>í™ˆìœ¼ë¡œ</span>
            </a>
        </div>

        <div class="max-w-4xl mx-auto relative z-10 text-center pt-8 sm:pt-4">
            <h1 class="text-4xl sm:text-5xl font-black mb-4 tracking-tight text-sky-400">ë…ë„, ì—­ì‚¬ì˜ ì§„ì‹¤</h1>
            <p class="text-lg sm:text-xl text-stone-300 max-w-2xl mx-auto font-light leading-relaxed">
                1454ë…„ë¶€í„° 2011ë…„ê¹Œì§€, ë¬¸í—Œê³¼ ì¡°ì•½ì´ ì¦ëª…í•˜ëŠ” <span class="text-sky-200 font-semibold">ëŒ€í•œë¯¼êµ­ ì˜í†  ì£¼ê¶Œ</span>ì˜ ê¸°ë¡ì„ í™•ì¸í•˜ì„¸ìš”.
            </p>
        </div>
        <div class="absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://images.unsplash.com/photo-1549558549-415a1cd1685c?q=80&w=2000&auto=format&fit=crop')] bg-cover bg-center"></div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow w-full max-w-5xl mx-auto px-4 sm:px-6 py-12 space-y-16">

        <!-- Section 1: History at a Glance (Analytics) -->
        <section>
            <div class="mb-8 text-center sm:text-left">
                <h2 class="text-2xl font-bold text-stone-800 flex items-center justify-center sm:justify-start gap-2">
                    <span class="text-sky-600">ğŸ“Š</span> ë°ì´í„°ë¡œ ë³´ëŠ” ë…ë„ ì—­ì‚¬
                </h2>
                <p class="mt-2 text-stone-600 max-w-3xl">
                    ìˆ˜ë°± ë…„ì— ê±¸ì¹œ ì—­ì‚¬ì  ê¸°ë¡ì€ ë…ë„ê°€ ë‹¨ìˆœíˆ í˜„ëŒ€ì˜ ë¶„ìŸ ì§€ì—­ì´ ì•„ë‹˜ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. 
                    <span class="font-semibold text-stone-800">ì¡°ì„ ì‹œëŒ€ì˜ í™•ê³ í•œ ê¸°ë¡</span>ë¶€í„° <span class="font-semibold text-stone-800">ê·¼í˜„ëŒ€ì˜ êµ­ì œì  ê²©ë³€</span>ê¹Œì§€, ì‚¬ê±´ì˜ íë¦„ì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-stone-200 p-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                    <div class="md:col-span-2">
                        <div class="chart-wrapper">
                            <canvas id="eraChart"></canvas>
                        </div>
                    </div>
                    <div class="space-y-6">
                        <div class="bg-sky-50 p-5 rounded-xl border border-sky-100">
                            <h3 class="text-sm font-semibold text-sky-800 uppercase tracking-wider mb-1">ì´ ê¸°ë¡ëœ ì£¼ìš” ì‚¬ê±´</h3>
                            <p class="text-4xl font-bold text-sky-900" id="totalEvents">18<span class="text-lg font-normal ml-1">ê±´</span></p>
                        </div>
                        <div class="bg-stone-50 p-5 rounded-xl border border-stone-100">
                            <h3 class="text-sm font-semibold text-stone-500 uppercase tracking-wider mb-1">ìµœì´ˆì˜ ê³µì‹ ê¸°ë¡</h3>
                            <p class="text-xl font-bold text-stone-800">1454ë…„</p>
                            <p class="text-sm text-stone-600 mt-1">ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Interactive Timeline -->
        <section id="timeline-section">
            <div class="flex flex-col sm:flex-row justify-between items-center mb-8 gap-4">
                <div class="text-center sm:text-left">
                    <h2 class="text-2xl font-bold text-stone-800 flex items-center justify-center sm:justify-start gap-2">
                        <span class="text-sky-600">â³</span> ì—°ëŒ€ê¸° íƒìƒ‰
                    </h2>
                    <p class="text-stone-500 text-sm mt-1">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì—¬ ì—­ì‚¬ì˜ íë¦„ì„ í•„í„°ë§í•´ë³´ì„¸ìš”.</p>
                </div>
                
                <!-- Filters -->
                <div class="flex flex-wrap justify-center gap-2" id="filters">
                    <button class="filter-btn active px-4 py-2 rounded-full text-sm font-medium border border-stone-300 text-stone-600 bg-white hover:bg-stone-50 transition-colors" data-filter="all">ì „ì²´ ë³´ê¸°</button>
                    <button class="filter-btn px-4 py-2 rounded-full text-sm font-medium border border-stone-300 text-stone-600 bg-white hover:bg-stone-50 transition-colors" data-filter="kr_record">ğŸ‡°ğŸ‡· í•œêµ­ì˜ ê¸°ë¡</button>
                    <button class="filter-btn px-4 py-2 rounded-full text-sm font-medium border border-stone-300 text-stone-600 bg-white hover:bg-stone-50 transition-colors" data-filter="jp_ack">ğŸ‡¯ğŸ‡µ ì¼ë³¸ì˜ ì¸ì •</button>
                    <button class="filter-btn px-4 py-2 rounded-full text-sm font-medium border border-stone-300 text-stone-600 bg-white hover:bg-stone-50 transition-colors" data-filter="conflict">âš ï¸ ë¶„ìŸ ë° ë„ë°œ</button>
                </div>
            </div>

            <!-- Timeline Container -->
            <div class="relative py-4" id="timeline-container">
                <div class="timeline-line hidden sm:block"></div>
                <!-- Dynamic Content Will Be Injected Here -->
            </div>
        </section>

        <!-- Section 3: Key Takeaway (Static Highlight) -->
        <section class="bg-stone-800 rounded-3xl p-8 sm:p-12 text-center text-stone-300">
            <h3 class="text-2xl sm:text-3xl font-bold text-white mb-6">"ë…ë„ëŠ” ì—­ì‚¬ì , ì§€ë¦¬ì , êµ­ì œë²•ì ìœ¼ë¡œ<br>ëª…ë°±í•œ ëŒ€í•œë¯¼êµ­ì˜ ê³ ìœ  ì˜í† ì…ë‹ˆë‹¤."</h3>
            <p class="max-w-3xl mx-auto leading-relaxed text-lg">
                1900ë…„ <span class="text-sky-400 font-bold">ëŒ€í•œì œêµ­ ì¹™ë ¹ ì œ41í˜¸</span>ëŠ” ë…ë„ê°€ ìš¸ë¦‰êµ°ì˜ ê´€í• êµ¬ì—­ì„ì„ ê·¼ëŒ€ë²•ì ìœ¼ë¡œ ëª…í™•íˆ í–ˆìŠµë‹ˆë‹¤. 
                ë°˜ë©´ ì¼ë³¸ì˜ 1905ë…„ í¸ì… ì¡°ì¹˜ëŠ” ëŸ¬ì¼ì „ìŸ ì¤‘ì˜ ë¶ˆë²•ì ì¸ ê°•ì  í–‰ìœ„ì˜€ìŠµë‹ˆë‹¤. 
                ìš°ë¦¬ì˜ ì—­ì‚¬ë¥¼ ë°”ë¥´ê²Œ ì•„ëŠ” ê²ƒì´ ì˜í†  ìˆ˜í˜¸ì˜ ì²«ê±¸ìŒì…ë‹ˆë‹¤.
            </p>
        </section>

    </main>

    <footer class="bg-white border-t border-stone-200 mt-12 py-8">
        <div class="max-w-5xl mx-auto px-4 text-center text-stone-500 text-sm">
            <p>Â© 2024 ë…ë„ ì—­ì‚¬ ì•„ì¹´ì´ë¸Œ. ì¶œì²˜: ë…ë„ ê´€ë ¨ ì£¼ìš” ì—°ëŒ€ê¸° (dokdo_history_table.md)</p>
        </div>
    </footer>

    <script>
        // --- Data Source ---
        const historyData = [
            { year: 1454, title: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€", content: "ìš°ì‚°(ë…ë„)ê³¼ ë¬´ë¦‰(ìš¸ë¦‰ë„)ì´ ê°•ì›ë„ ìš¸ì§„í˜„ì— ì†í•œë‹¤ê³  ê¸°ë¡í•˜ì—¬ ë…ë„ë¥¼ ìš°ë¦¬ ì˜í† ë¡œ ëª…ì‹œí•¨.", type: "kr_record" },
            { year: 1531, title: "ì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒ", content: "ë…ë„ê°€ ìš°ë¦¬ ì˜í† ì„ì„ ë‹¤ì‹œ í•œë²ˆ ë°íˆëŠ” êµ­ê°€ ì°¨ì›ì˜ ê´€ì°¬ ì§€ë¦¬ì§€ë¥¼ í¸ì°¬í•¨.", type: "kr_record" },
            { year: 1667, title: "ì€ì£¼ì‹œì²­í•©ê¸°", content: "ì¼ë³¸ì˜ ë¬¸í—Œì„ì—ë„ ë¶ˆêµ¬í•˜ê³  ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¼ë³¸ ì˜í†  ë°–(ì¡°ì„  ë•…)ì„ì„ ê¸°ë¡í•¨.", type: "jp_ack" },
            { year: 1693, title: "1ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", content: "ì•ˆìš©ë³µì´ ì¼ë³¸ìœ¼ë¡œ ëŒë ¤ê°€ ë…ë„ê°€ ì¡°ì„ ì˜ ë•…ì„ì„ ë‹¹ë‹¹íˆ ì£¼ì¥í•¨.", type: "kr_record" },
            { year: 1696, title: "2ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", content: "ì¼ë³¸ì— ê±´ë„ˆê°€ ë¶ˆë²• ì¹¨ë²”ì— í•­ì˜í•˜ì˜€ìœ¼ë©°, ì¼ë³¸ ë§‰ë¶€ê°€ 'ìš¸ë¦‰ë„ ë„í•´ ê¸ˆì§€ë ¹'ì„ ë‚´ë¦¬ëŠ” ê³„ê¸°ê°€ ë¨.", type: "kr_record" },
            { year: 1785, title: "ì‚¼êµ­ì ‘ì–‘ì§€ë„", content: "ì¼ë³¸ì˜ í•˜ì•¼ì‹œ ì‹œí—¤ì´ê°€ ì œì‘í•œ ì§€ë„ë¡œ, ë…ë„ë¥¼ ì¡°ì„ ìƒ‰(í™©ìƒ‰)ìœ¼ë¡œ ì¹ í•˜ê³  'ì¡°ì„ ì˜ ê²ƒ'ì´ë¼ í‘œê¸°í•¨.", type: "jp_ack" },
            { year: 1877, title: "íƒœì •ê´€ ì§€ë ¹", content: "ì¼ë³¸ ìµœê³  í–‰ì •ê¸°ê´€ì´ \"ë…ë„ì™€ ìš¸ë¦‰ë„ëŠ” ì¼ë³¸ê³¼ ê´€ê³„ì—†ë‹¤\"ê³  ê³µì‹ì ìœ¼ë¡œ ì¸ì •í•¨.", type: "jp_ack" },
            { year: 1900, title: "ëŒ€í•œì œêµ­ ì¹™ë ¹ 41í˜¸", content: "ê³ ì¢… í™©ì œê°€ ë…ë„ë¥¼ ìš¸ë¦‰êµ°ì˜ ê´€í•  êµ¬ì—­ìœ¼ë¡œ ëª…ë¬¸í™”í•˜ì—¬ ê³µì‹ ë°˜í¬í•¨.", type: "kr_record" },
            { year: 1905, title: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ 40í˜¸", content: "ì¼ë³¸ì´ ëŸ¬ì¼ì „ìŸ ì¤‘ ë…ë„ë¥¼ ë¶ˆë²•ì ìœ¼ë¡œ 'ë‹¤ì¼€ì‹œë§ˆ'ë¡œ í¸ì…í•˜ëŠ” ë¬´íš¨í•œ í–‰ìœ„ë¥¼ í•¨.", type: "conflict" },
            { year: 1906, title: "ì‹¬í¥íƒ ë³´ê³ ì„œ", content: "ìš¸ë¦‰êµ°ìˆ˜ ì‹¬í¥íƒì´ ë…ë„ì˜ ì¼ë³¸ í¸ì… ì†Œì‹ì„ ë“£ê³  ì¤‘ì•™ ì •ë¶€ì— ê¸´ê¸‰ ë³´ê³ í•¨.", type: "kr_record" },
            { year: 1946, title: "SCAPIN ì œ677í˜¸", content: "ì—°í•©êµ°ìµœê³ ì‚¬ë ¹ê´€ ì§€ë ¹ìœ¼ë¡œ, ë…ë„ë¥¼ ì¼ë³¸ì˜ í–‰ì • ë° í†µì¹˜ê¶Œì—ì„œ ëª…í™•íˆ ì œì™¸í•¨.", type: "international" },
            { year: 1951, title: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½", content: "ì¼ë³¸ì˜ í•œêµ­ ë…ë¦½ ì¸ì •ì„ ëª…ì‹œí–ˆìœ¼ë‚˜, ë…ë„ ëª…ì¹­ ëˆ„ë½ìœ¼ë¡œ í–¥í›„ ë¶„ìŸì˜ ë¶ˆì”¨ê°€ ë¨.", type: "conflict" },
            { year: 1952, title: "í‰í™”ì„  ì„ í¬", content: "ì´ìŠ¹ë§Œ ëŒ€í†µë ¹ì´ ë…ë„ë¥¼ í¬í•¨í•œ ì¸ì ‘ í•´ì–‘ì— ëŒ€í•œ ëŒ€í•œë¯¼êµ­ ì£¼ê¶Œì„ ì„ ì–¸í•¨.", type: "kr_record" },
            { year: 1953, title: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ í™œë™", content: "í™ìˆœì¹  ë“± ë¯¼ê°„ì¸ë“¤ì´ ìë°œì ìœ¼ë¡œ ë…ë„ì— ìƒì£¼í•˜ë©° ì¼ë³¸ì˜ ì¹¨ë²”ì„ ë§‰ì•„ëƒ„.", type: "kr_record" },
            { year: 1965, title: "í•œì¼ê¸°ë³¸ì¡°ì•½", content: "ë…ë„ ë¬¸ì œë¥¼ ëª…ì‹œì ìœ¼ë¡œ í•´ê²°í•˜ì§€ ì•Šê³  ë´‰í•©í•˜ì—¬ ê°ˆë“±ì´ ì ë³µ ìƒíƒœë¡œ ë‚¨ìŒ.", type: "conflict" },
            { year: 1998, title: "ì‹ í•œì¼ì–´ì—…í˜‘ì •", content: "ë…ë„ê°€ í•œì¼ ì¤‘ê°„ìˆ˜ì—­ì— í¬í•¨ë˜ë©´ì„œ ì˜ìœ ê¶Œ ë…¼ë€ê³¼ ê´€ë ¨í•œ êµ­ë¯¼ì  ìš°ë ¤ê°€ ë°œìƒí•¨.", type: "conflict" },
            { year: 2005, title: "ë‹¤ì¼€ì‹œë§ˆì˜ ë‚  ì œì •", content: "ì¼ë³¸ ì‹œë§ˆë„¤í˜„ì´ 2ì›” 22ì¼ì„ 'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ 'ë¡œ ì œì •í•˜ì—¬ ë„ë°œì„ ê³µì‹í™”í•¨.", type: "conflict" },
            { year: 2011, title: "ì¼ë³¸ êµê³¼ì„œ ì™œê³¡", content: "ì¼ë³¸ ì¤‘í•™êµ êµê³¼ì„œ ë‹¤ìˆ˜ì— ë…ë„ ì˜ìœ ê¶Œ ì£¼ì¥ì„ ê¸°ìˆ í•˜ì—¬ ì—­ì‚¬ ì™œê³¡ì„ ë³¸ê²©í™”í•¨.", type: "conflict" }
        ];

        // Type Mapping for Visuals
        const typeConfig = {
            kr_record: { label: "ğŸ‡°ğŸ‡· í•œêµ­ì˜ ê¸°ë¡/í™œë™", color: "bg-sky-100 border-sky-300 text-sky-800", icon: "ğŸ“œ" },
            jp_ack: { label: "ğŸ‡¯ğŸ‡µ ì¼ë³¸ì˜ ì¸ì •", color: "bg-emerald-100 border-emerald-300 text-emerald-800", icon: "âœ…" },
            conflict: { label: "âš ï¸ ë¶„ìŸ/ë„ë°œ", color: "bg-rose-100 border-rose-300 text-rose-800", icon: "âš”ï¸" },
            international: { label: "ğŸŒ êµ­ì œ ì¡°ì•½", color: "bg-indigo-100 border-indigo-300 text-indigo-800", icon: "âš–ï¸" }
        };
        
        function getTypeConfig(type) {
            return typeConfig[type] || { label: "ê¸°íƒ€", color: "bg-gray-100", icon: "ğŸ“Œ" };
        }

        // --- Logic: Analytics ---
        function renderChart() {
            const ctx = document.getElementById('eraChart').getContext('2d');
            
            // Group by Century
            const centuries = {
                '15ì„¸ê¸°': 0, '16ì„¸ê¸°': 0, '17ì„¸ê¸°': 0, '18ì„¸ê¸°': 0, '19ì„¸ê¸°': 0, '20ì„¸ê¸°': 0, '21ì„¸ê¸°': 0
            };
            
            historyData.forEach(item => {
                const century = Math.ceil(item.year / 100) + 'ì„¸ê¸°';
                if (centuries[century] !== undefined) centuries[century]++;
            });

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(centuries),
                    datasets: [{
                        label: 'ì£¼ìš” ì‚¬ê±´ ìˆ˜',
                        data: Object.values(centuries),
                        backgroundColor: [
                            '#e0f2fe', '#bae6fd', '#7dd3fc', '#38bdf8', '#0ea5e9', '#0284c7', '#0369a1'
                        ],
                        borderRadius: 6,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.raw}ê±´ì˜ ì£¼ìš” ê¸°ë¡`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { display: true, drawBorder: false, color: '#f5f5f4' },
                            ticks: { precision: 0 }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        // --- Logic: Timeline Rendering ---
        const container = document.getElementById('timeline-container');

        function renderTimeline(filter = 'all') {
            container.innerHTML = '<div class="timeline-line hidden sm:block absolute left-1/2 transform -translate-x-1/2 w-0.5 h-full bg-stone-200"></div>';
            
            let displayData = historyData;
            if (filter !== 'all') {
                if (filter === 'conflict') {
                    displayData = historyData.filter(item => item.type === 'conflict' || item.type === 'international');
                } else {
                    displayData = historyData.filter(item => item.type === filter);
                }
            }

            if (displayData.length === 0) {
                container.innerHTML += `<div class="text-center py-10 text-stone-400">í•´ë‹¹í•˜ëŠ” ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
                return;
            }

            displayData.forEach((item, index) => {
                const isLeft = index % 2 === 0;
                const config = getTypeConfig(item.type);
                
                const cardHtml = `
                    <div class="timeline-card bg-white p-6 rounded-2xl shadow-sm border border-stone-100 relative group cursor-default text-left">
                        <div class="flex items-center justify-between mb-3">
                            <span class="text-xs font-bold uppercase tracking-wider px-2 py-1 rounded ${config.color}">
                                ${config.icon} ${config.label}
                            </span>
                            <span class="text-2xl font-black text-stone-200 group-hover:text-stone-300 transition-colors">${item.year}</span>
                        </div>
                        <h3 class="text-lg font-bold text-stone-900 mb-2 group-hover:text-sky-700 transition-colors">${item.title}</h3>
                        <p class="text-stone-600 text-sm leading-relaxed">${item.content}</p>
                    </div>
                `;

                const wrapper = document.createElement('div');
                wrapper.className = `flex flex-col sm:flex-row items-center justify-between w-full mb-8 relative z-10`;
                
                const centerDot = `
                    <div class="timeline-dot absolute left-0 sm:left-1/2 w-8 h-8 rounded-full border-4 border-white bg-sky-500 shadow-md flex items-center justify-center sm:-translate-x-1/2 transform -translate-y-1/2 sm:translate-y-0 mt-0 sm:mt-0 z-20">
                        <span class="text-[10px] text-white font-bold">${index + 1}</span>
                    </div>
                `;
                
                if (window.innerWidth >= 640) {
                    if (isLeft) {
                        wrapper.innerHTML = `
                            <div class="w-full sm:w-5/12 text-right pr-8 pl-4 sm:pl-0">
                                ${cardHtml}
                            </div>
                            ${centerDot}
                            <div class="w-full sm:w-5/12 pl-8 pr-4 sm:pr-0 hidden sm:block"></div>
                        `;
                    } else {
                        wrapper.innerHTML = `
                            <div class="w-full sm:w-5/12 text-right pr-8 hidden sm:block"></div>
                            ${centerDot}
                            <div class="w-full sm:w-5/12 pl-8 pr-4 sm:pr-0">
                                ${cardHtml}
                            </div>
                        `;
                    }
                } else {
                    wrapper.className = `flex flex-col w-full mb-6 relative pl-8`; 
                    const mobileDot = `
                        <div class="timeline-dot absolute left-0 top-6 w-4 h-4 rounded-full border-2 border-white bg-sky-500 shadow-md z-20"></div>
                    `;
                    const mobileLine = `<div class="absolute left-2 top-0 bottom-0 w-0.5 bg-stone-200 z-0"></div>`;
                    
                    wrapper.innerHTML = `
                        ${mobileLine}
                        ${mobileDot}
                        <div class="w-full">
                            ${cardHtml}
                        </div>
                    `;
                }

                container.appendChild(wrapper);
            });
        }

        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('totalEvents').innerHTML = historyData.length + '<span class="text-lg font-normal ml-1">ê±´</span>';
            renderChart();
            renderTimeline('all');
            
            let lastWidth = window.innerWidth;
            window.addEventListener('resize', () => {
                if (window.innerWidth !== lastWidth) {
                    lastWidth = window.innerWidth;
                    const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
                    renderTimeline(activeFilter);
                }
            });

            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    buttons.forEach(b => b.classList.remove('active'));
                    e.currentTarget.classList.add('active');
                    const filter = e.currentTarget.dataset.filter;
                    renderTimeline(filter);
                });
            });
        });
    </script>
</body>
</html>
